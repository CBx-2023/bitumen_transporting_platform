<!-- pages/driver/index.wxml -->
<navigation-bar title="司机端" back="{{false}}" color="white" background="#2c3e50"></navigation-bar>
<scroll-view class="scrollarea" scroll-y type="list">
  <view class="container">
    <!-- 司机信息卡片 -->
    <view class="driver-card">
      <view class="driver-info">
        <image class="driver-avatar" src="{{userInfo.avatar}}" mode="aspectFill"></image>
        <view class="driver-details">
          <text class="driver-name">{{userInfo.name}}</text>
          <text class="driver-phone">{{userInfo.phone}}</text>
          <text class="driver-car">车牌号：{{userInfo.carNumber}}</text>
        </view>
      </view>
      <view class="driver-status {{userInfo.status === '空闲中' ? 'status-free' : 'status-busy'}}">
        {{userInfo.status}}
      </view>
    </view>
    
    <!-- 统计信息 -->
    <view class="statistics-card">
      <view class="stat-item">
        <text class="stat-value">{{statistics.todayOrders}}</text>
        <text class="stat-label">今日订单</text>
      </view>
      <view class="stat-item">
        <text class="stat-value">{{statistics.monthOrders}}</text>
        <text class="stat-label">本月订单</text>
      </view>
      <view class="stat-item">
        <text class="stat-value">{{statistics.totalOrders}}</text>
        <text class="stat-label">总订单数</text>
      </view>
    </view>
    
    <!-- 订单列表 -->
    <view class="section-title">订单列表</view>
    <view class="order-list">
      <block wx:if="{{orderList.length > 0}}">
        <view class="order-item" wx:for="{{orderList}}" wx:key="id">
          <view class="order-header">
            <text class="order-id">订单号：{{item.id}}</text>
            <text class="order-status {{item.status === '待接单' ? 'status-waiting' : 'status-inprogress'}}">{{item.status}}</text>
          </view>
          
          <view class="order-content" bindtap="viewOrderDetail" data-id="{{item.id}}">
            <view class="order-route">
              <view class="location-item">
                <view class="location-dot start-dot"></view>
                <text class="location-text">{{item.startLocation}}</text>
              </view>
              <view class="route-line"></view>
              <view class="location-item">
                <view class="location-dot end-dot"></view>
                <text class="location-text">{{item.endLocation}}</text>
              </view>
            </view>
            
            <view class="order-info">
              <view class="info-item">
                <text class="info-label">货物类型：</text>
                <text class="info-value">{{item.goodsType}}</text>
              </view>
              <view class="info-item">
                <text class="info-label">重量：</text>
                <text class="info-value">{{item.weight}}</text>
              </view>
              <view class="info-item">
                <text class="info-label">创建时间：</text>
                <text class="info-value">{{item.createTime}}</text>
              </view>
              <view class="info-item">
                <text class="info-label">运费：</text>
                <text class="info-value price">{{item.price}}</text>
              </view>
            </view>
          </view>
          
          <view class="order-actions">
            <block wx:if="{{item.status === '待接单'}}">
              <button class="action-btn primary" bindtap="takeOrder" data-id="{{item.id}}">接单</button>
            </block>
            <block wx:if="{{item.status === '运输中'}}">
              <button class="action-btn" bindtap="startNavigation" data-id="{{item.id}}">开始导航</button>
              <button class="action-btn primary" bindtap="completeOrder" data-id="{{item.id}}">完成订单</button>
            </block>
          </view>
        </view>
      </block>
      
      <view wx:if="{{orderList.length === 0}}" class="empty-list">
        <image class="empty-icon" src="/pages/images/empty.png" mode="aspectFit"></image>
        <text class="empty-text">暂无订单</text>
      </view>
    </view>
  </view>
</scroll-view>